<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <record id="view_runbot_preseed_database_refresh_form" model="ir.ui.view">
        <field name="model">runbot.preseed.database.refresh</field>
        <field name="arch" type="xml">
            <form>
                <group>
                    <field name="repo_id" attrs="{'invisible': [('repo_id', '=', False)]}" />
                    <field name="branch_id" attrs="{'invisible': [('branch_id', '=', False)]}" />
                </group>
                <group>
                    <field name="build_id" placeholder="Select a build to read modules from, or add modules manually" attrs="{'required': [('preseed_database_module_ids', '=', [])]}" domain="[('repo_id', '=?', repo_id), ('branch_id', '=?', branch_id)]" />
                    <field name="preseed_database_module_ids" />
                    <field name="preseed_database" invisible="1" />
                </group>
                <footer>
                    <button type="object" name="action_get_modules" string="Read modules" attrs="{'invisible': [('preseed_database_module_ids', '!=', [])]}" class="oe_button" />
                    <button type="object" name="action_write_result" string="Refresh automatically" attrs="{'invisible': [('preseed_database_module_ids', '=', [])]}" class="oe_button" />
                    <button special="cancel" string="Cancel" />
                </footer>
            </form>
        </field>
    </record>
    <act_window
        id="action_runbot_preseed_database"
        name="Refresh preseed database"
        res_model="runbot.preseed.database.refresh"
        view_mode="form"
        target="new"
        view_id="view_runbot_preseed_database_refresh_form"
    />
</odoo>
